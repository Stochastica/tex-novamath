\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{novamath-thm}

\RequirePackage{xkeyval} % Argūmenta cum nōminibus
\DeclareOptionX{lingua}[]{\def\novamath@lingua{#1}}
\ExecuteOptionsX{lingua=english}
\ProcessOptionsX\relax
%
%\endinput

\usepackage{amsthm} % AMS Theōrēmata
\usepackage{mdframed} % Corpus theōrēmatum

\newtheoremstyle{theorema}
  {}% Spatium super
  {}% Spatium īnfrā
  {\itshape}% Corpus
  {}% Endens
  {\bfseries}% Caput
  {.\\}% Punctuātiō capitis
  { }% Spatium sequēns caput
  {\thmnumber{#2}\ifx#3\relax\relax\thmname{ #1}\else\thmnote{ #3}\fi}

\theoremstyle{theorema}
\newtheorem{theorema}        {\IfStrEqCase{\novamath@lingua}{
	{latina}{Theōrēma}
	{english}{Theorem}
}[Theorem]}[section]
\newtheorem*{theorema*}        {\IfStrEqCase{\novamath@lingua}{
	{latina}{Theōrēma}
	{english}{Theorem}
}[Theorem]}
\newtheorem{theoremaSchema}  [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Theōrēma Schēma}
	{english}{Theorem Schema}
}[Theorem Schema]}
\newtheorem{propositio}      [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Prōpositiō}
	{english}{Proposition}
}[Proposition]}
\newtheorem*{propositio*}      {\IfStrEqCase{\novamath@lingua}{
	{latina}{Prōpositiō}
	{english}{Proposition}
}[Proposition]}
\newtheorem{propositioSchema}[theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Prōpositiō Schēma}
	{english}{Proposition Schema}
}[Proposition Schema]}
\newtheorem{lemma}           [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Lemma}
	{english}{Lemma}
}[Lemma]}
\newtheorem*{lemma*}           {\IfStrEqCase{\novamath@lingua}{
	{latina}{Lemma}
	{english}{Lemma}
}[Lemma]}
\newtheorem{lemmaSchema}     [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Lemma Schēma}
	{english}{Lemma Schema}
}[Lemma Schema]}
\newtheorem{corollaria}      [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Corōllāria}
	{english}{Corollary}
}[Corollary]}
\newtheorem{corollariaSchema}[theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Corōllāria Schēma}
	{english}{Corollary Schema}
}[Corollary Schema]}
\newtheorem{aequivalentia}   [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Æquivalentia}
	{english}{Equivalence}
}[Equivalence]}
\newtheorem{identitas}       [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Īdentitās}
	{english}{Identity}
}[Identity]}
\newtheorem{algorithmus}     [theorema]{\IfStrEqCase{\novamath@lingua}{
	{latina}{Algorithmus}
	{english}{Algorithm}
}[Algorithm]}
\newtheorem{conjectura}{\IfStrEqCase{\novamath@lingua}{
	{latina}{Conjectūra}
	{english}{Conjecture}
}[Conjecture]}[section]
\newtheorem*{conjectura*}{\IfStrEqCase{\novamath@lingua}{
	{latina}{Conjectūra}
	{english}{Conjecture}
}[Conjecture]}
\newtheorem{problema}{\IfStrEqCase{\novamath@lingua}{
	{latina}{Problēma}
	{english}{Problem}
}[Problem]}[section]
\newtheorem*{problema*}{\IfStrEqCase{\novamath@lingua}{
	{latina}{Problēma}
	{english}{Problem}
}[Problem]}

\theoremstyle{remark}
\newtheorem*{nota}{\IfStrEqCase{\novamath@lingua}{
	{latina}{Nota}
	{english}{Note}
}[Note]}
\newtheorem*{cave}{%
	{\fontencoding{U}\fontfamily{futs}\selectfont\char 66\relax}}%
%\newtheorem*{cave}{\IfStrEqCase{\novamath@lingua}{
%	{latina}{Cavē}
%	{english}{Warning}
%}[Warning]}

\newenvironment{Metadefinitio}[1][]
{
	\begin{mdframed}
	[
		nobreak=true,
		linecolor=magenta!60!black,
		linewidth=2pt,
		frametitle={\IfStrEqCase{\novamath@lingua}{
			{latina}{Metadēfīnītiō}
			{english}{Metadefinition}
		}[Metadefinition]},
		frametitlerule=true,
		frametitlebackgroundcolor=gray!20,
		innertopmargin=\topskip,
	]
}{
	\end{mdframed}
}
\newenvironment{DefinitioSchema}[1][]
{
	\begin{mdframed}
	[
		nobreak=true,
		linecolor=orange!50!yellow,
		linewidth=2pt,
		frametitle={\IfStrEqCase{\novamath@lingua}{
			{latina}{Dēfīnītiō Schēma}
			{english}{Definition Schema}
		}[Definition Schema]},
		frametitlerule=true,
		frametitlebackgroundcolor=gray!20,
		innertopmargin=\topskip,
	]
}{
	\end{mdframed}
}
\newenvironment{Definitio}[1][]
{
	\begin{mdframed}
	[
		nobreak=true,
		linecolor=orange,
		linewidth=2pt,
		frametitle={\IfStrEqCase{\novamath@lingua}{
			{latina}{Dēfīnītiō}
			{english}{Definition}
		}[Definition]},
		frametitlerule=true,
		frametitlebackgroundcolor=gray!20,
		innertopmargin=\topskip,
	]
}{
	\end{mdframed}
}
\newenvironment{Axioma}[1][]
{
	\begin{mdframed}
	[
		nobreak=true,
		linecolor=red,
		linewidth=2pt,
		frametitle={#1},
		frametitlerule=true,
		frametitlebackgroundcolor=gray!20,
		innertopmargin=\topskip,
	]
}{
	\end{mdframed}
}
\newenvironment{AxiomaSchema}[1][]
{
	\begin{mdframed}
	[
		nobreak=true,
		linecolor=red!20!purple,
		linewidth=2pt,
		frametitle={#1},
		frametitlerule=true,
		frametitlebackgroundcolor=gray!20,
		innertopmargin=\topskip,
	]
}{
	\end{mdframed}
}
\newenvironment{exemplum}[1][]
{
	\begin{mdframed}
	[
		nobreak=true,
		linecolor=blue,
		linewidth=2pt,
		frametitle={\IfStrEqCase{\novamath@lingua}{
			{latina}{Exemplum}
			{english}{Example}
		}[Example]: {#1}},
		frametitlerule=true,
		frametitlebackgroundcolor=gray!20,
		backgroundcolor=gray!2,
		innertopmargin=\topskip,
	]
}{
	\end{mdframed}
}
\NewDocumentEnvironment{demonstratio}{o}
{\IfValueTF{#1}
	{\emph{\IfStrEqCase{\novamath@lingua}{
		{latina}{Dēmōnstrātiō dē}
		{english}{Proof of}
	}[Proof of]} #1.\\}
	{\emph{\IfStrEqCase{\novamath@lingua}{
		{latina}{Dēmōnstrātiō}
		{english}{Proof}
	}[Proof].}}
}
{
	\qed
}

